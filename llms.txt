# VNStock MCP Server

> MCP server providing Vietnamese financial market data through Claude Desktop via vnstock3

## Overview

VNStock MCP Server is a containerized Model Context Protocol (MCP) server that integrates Vietnamese financial market data with Claude Desktop. It provides historical price data for Vietnamese stocks, forex rates, cryptocurrencies, and international indices using the vnstock3 library.

The server runs as an isolated Docker container via MCP Gateway and uses stdio transport to communicate with Claude Desktop.

## Available Tools

### get_stock_history

Fetch historical stock price data for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'VNM', 'HPG')
- `start` (string, required): Start date in YYYY-MM-DD format (e.g., '2024-01-01')
- `end` (string, required): End date in YYYY-MM-DD format (e.g., '2024-12-31')
- `interval` (string, optional): Time interval - '1D' (daily), '1W' (weekly), '1M' (monthly). Default: '1D'
- `source` (string, optional): Data source. Default: 'VCI'

**Returns:** JSON string containing OHLCV data (Open, High, Low, Close, Volume) with dates

**Example Query:**
```
Get VCI stock prices from January 1, 2024 to December 31, 2024
```

**Data Source:** VCI (Viet Capital Securities)

### get_forex_history

Fetch historical forex exchange rate data.

**Parameters:**
- `symbol` (string, required): Forex pair symbol (e.g., 'USDVND', 'EURVND', 'JPYVND')
- `start` (string, required): Start date in YYYY-MM-DD format
- `end` (string, required): End date in YYYY-MM-DD format
- `interval` (string, optional): Time interval - '1D', '1W', '1M'. Default: '1D'

**Returns:** JSON string containing OHLC data (Open, High, Low, Close) with dates

**Example Query:**
```
Show me USDVND exchange rates from 2024-06-01 to 2024-12-31
```

**Data Source:** MSN Finance

### get_crypto_history

Fetch historical cryptocurrency price data.

**Parameters:**
- `symbol` (string, required): Cryptocurrency symbol (e.g., 'BTC', 'ETH', 'BNB')
- `start` (string, required): Start date in YYYY-MM-DD format
- `end` (string, required): End date in YYYY-MM-DD format
- `interval` (string, optional): Time interval - '1D', '1W', '1M'. Default: '1D'

**Returns:** JSON string containing OHLCV data (Open, High, Low, Close, Volume) with dates

**Example Query:**
```
Get Bitcoin price history from 2024-01-01 to 2024-12-31
```

**Data Source:** MSN Finance

### get_index_history

Fetch historical index data for Vietnamese market indices.

**Parameters:**
- `symbol` (string, required): Index symbol
  - Vietnamese: 'VNINDEX', 'HNXINDEX', 'UPCOMINDEX'
- `start` (string, required): Start date in YYYY-MM-DD format
- `end` (string, required): End date in YYYY-MM-DD format
- `interval` (string, optional): Time interval - '1D', '1W', '1M'. Default: '1D'

**Returns:** JSON string containing OHLCV data with dates

**Example Queries:**
```
Retrieve VNINDEX data for 2024
Get HNXINDEX data from 2024-01-01 to 2024-12-31
```

**Data Source:** VCI (Viet Capital Securities)

### get_income_statement

Fetch annual income statement (profit & loss) for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'VNM', 'HPG')
- `lang` (string, optional): Language - 'en' (English) or 'vi' (Vietnamese). Default: 'en'

**Returns:** JSON string with annual income statement data including revenue, expenses, profit metrics, and earnings per share (EPS) for multiple years

**Example Query:**
```
Get the annual income statement for VCI stock
```

**Data Source:** VCI (Viet Capital Securities)

### get_balance_sheet

Fetch annual balance sheet for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'VNM', 'HPG')
- `lang` (string, optional): Language - 'en' (English) or 'vi' (Vietnamese). Default: 'en'

**Returns:** JSON string with annual balance sheet data including assets, liabilities, equity, and detailed financial position metrics for multiple years

**Example Query:**
```
Show me the balance sheet for HPG in Vietnamese
```

**Data Source:** VCI (Viet Capital Securities)

### get_cash_flow

Fetch annual cash flow statement for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'VNM', 'HPG')
- `lang` (string, optional): Language - 'en' (English) or 'vi' (Vietnamese). Default: 'en'

**Returns:** JSON string with annual cash flow data including operating, investing, and financing activities for multiple years

**Example Query:**
```
Retrieve cash flow statement for VNM
```

**Data Source:** VCI (Viet Capital Securities)

### get_financial_ratios

Fetch annual financial ratios and metrics for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'VNM', 'HPG')
- `lang` (string, optional): Language - 'en' (English) or 'vi' (Vietnamese). Default: 'en'

**Returns:** JSON string with annual financial ratios including P/B (Price-to-Book), ROE (Return on Equity), and other key financial health indicators for multiple years

**Example Query:**
```
Get financial ratios for FPT stock
```

**Data Source:** VCI (Viet Capital Securities)

### get_dividend_history

Fetch complete dividend history for Vietnamese stocks.

**Parameters:**
- `symbol` (string, required): Stock ticker symbol (e.g., 'VCI', 'ACB', 'HPG')

**Returns:** JSON string with complete dividend history including exercise_date, cash_year, cash_dividend_percentage, and issue_method for all historical records. No date filtering applied - returns all available dividend data.

**Example Queries:**
```
Get dividend history for ACB stock
Show me all dividend payments for VCI
```

**Data Source:** TCBS

**Note:** Returns complete historical records without date filtering. TCBS is the only data source for dividend information.

### get_sjc_gold_price

Fetch SJC gold prices (current or historical).

**Parameters:**
- `date` (string, optional): Date in YYYY-MM-DD format (e.g., '2024-01-15'). If not specified, returns current prices. Historical data available from 2016-01-02.

**Returns:** JSON string with gold price data including name, branch, buy_price, sell_price, date for 9 gold products

**Example Queries:**
```
Get current SJC gold prices
Show me SJC gold prices for 2024-01-15
Get SJC gold prices for January 1, 2024
```

**Data Source:** SJC (Saigon Jewelry Company)

**Note:** SJC is the largest gold trading company in Vietnam. Returns 9 gold products with buy/sell prices.

### get_btmc_gold_price

Fetch current BTMC (Bảo Tín Minh Châu) gold prices.

**Parameters:** None

**Returns:** JSON string with gold price data including name, karat, gold_content, buy_price, sell_price, world_price, time for 49 gold products

**Example Queries:**
```
Get BTMC gold prices
Show me current Bao Tin Minh Chau gold prices
What are BTMC gold prices right now?
```

**Data Source:** BTMC (Bảo Tín Minh Châu)

**Note:** BTMC is a major gold jewelry retailer in Vietnam. Returns 49 products with detailed karat ratings, gold content percentages, and world price references. Real-time data only (no historical support).

### get_vcb_exchange_rate

Fetch VCB (Vietcombank) exchange rates for a specific date.

**Parameters:**
- `date` (string, required): Date in YYYY-MM-DD format (e.g., '2024-01-15')

**Returns:** JSON string with exchange rate data including currency_code, currency_name, buy_cash, buy_transfer, sell, date for 20 major currencies

**Example Queries:**
```
Get VCB exchange rates for 2024-12-31
Show me Vietcombank exchange rates for today
What are the VCB rates for January 1, 2024?
```

**Data Source:** VCB (Vietcombank)

**Note:** VCB is the largest commercial bank in Vietnam. Returns rates for 20 major currencies. Distinguishes between cash buying rate and transfer buying rate. Single date only (no range support).

## Data Sources

The server uses six data sources via vnstock3:

1. **VCI (Viet Capital Securities)**: Vietnamese stocks, indices, and financial statements
   - Used by: `get_stock_history()`, `get_index_history()`, all financial statement tools
   - Implementation: `Quote` class and `Vnstock().stock().finance` from vnstock3

2. **MSN Finance**: Forex and crypto
   - Used by: `get_forex_history()`, `get_crypto_history()`
   - Implementation: `Vnstock().fx`, `Vnstock().crypto`

3. **TCBS**: Dividend data
   - Used by: `get_dividend_history()`
   - Implementation: `Vnstock().stock().company` from vnstock3

4. **SJC (Saigon Jewelry Company)**: Gold prices
   - Used by: `get_sjc_gold_price()`
   - Implementation: `sjc_gold_price()` from vnstock.explorer.misc.gold_price

5. **BTMC (Bảo Tín Minh Châu)**: Gold prices
   - Used by: `get_btmc_gold_price()`
   - Implementation: `btmc_goldprice()` from vnstock.explorer.misc.gold_price

6. **VCB (Vietcombank)**: Bank exchange rates
   - Used by: `get_vcb_exchange_rate()`
   - Implementation: `vcb_exchange_rate()` from vnstock.explorer.misc.exchange_rate

## Technical Details

- **Protocol**: Model Context Protocol (MCP) 2025-06-18
- **Framework**: FastMCP (MCP SDK 1.2.0+)
- **Runtime**: Python 3.11 in Docker container
- **Data Library**: vnstock3 3.2.0+
- **Data Processing**: pandas 2.0.0+
- **Portfolio Optimization**: PyPortfolioOpt 1.5.6+
- **Transport**: stdio (Standard Input/Output)
- **Deployment**: Docker containerized, ~1.7GB image size (v1.0.0+: increased from ~1.2GB)
- **Architecture**: Stateless - each tool invocation creates a fresh container instance
- **Total Tools**: 16 (4 price history + 3 portfolio optimization + 4 financial statements + 1 dividend + 1 company info + 3 commodity/exchange)

## Usage Patterns

### Date Format
All dates must be in `YYYY-MM-DD` format:
- Valid: '2024-01-01', '2024-12-31'
- Invalid: '01/01/2024', '2024-1-1', '01-01-2024'

### Interval Options
- `'1D'`: Daily data (default)
- `'1W'`: Weekly data
- `'1M'`: Monthly data

### Common Symbol Formats

**Vietnamese Stocks**: 3-letter uppercase (VCI, VNM, HPG, FPT, etc.)

**Forex Pairs**: 6-letter format with VND (USDVND, EURVND, JPYVND, etc.)

**Cryptocurrencies**: Standard symbols (BTC, ETH, BNB, XRP, etc.)

**Vietnamese Indices**:
- VNINDEX: Ho Chi Minh Stock Exchange
- HNXINDEX: Hanoi Stock Exchange
- UPCOMINDEX: UPCoM Index

### Error Handling
All tools return error messages as strings when exceptions occur. Errors are formatted as:
```
Error: <error description>
```

## Integration

### Claude Desktop
Configure in `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) to use MCP Gateway.

### MCP Gateway
Requires Docker MCP Gateway configuration at:
- `~/.docker/mcp/config.yaml`: Server enablement
- `~/.docker/mcp/catalogs/custom.yaml`: Server definition
- `~/.docker/mcp/registry.yaml`: Registry entries

### Container Execution
Each tool call spawns an isolated Docker container running `vnprices-mcp:latest` image. Containers are stateless and terminate after returning results.

## References

- vnstock3 Documentation: https://vnstocks.com/docs/vnstock/thong-ke-gia-lich-su
- vnstock Historical Prices Guide: https://github.com/gahoccode/docs/blob/main/vnstock/historical_prices.md
- vnstock Financial Statements Guide: https://github.com/gahoccode/docs/blob/main/vnstock/financial_statements.md
- vnstock Financial Statements Data Types: https://github.com/gahoccode/docs/blob/main/vnstock/financial_statements_dtypes.md
- vnstock Dividends Guide: https://github.com/gahoccode/docs/blob/main/vnstock/dividends.md
- vnstock Commodity Prices Guide: https://github.com/gahoccode/docs/blob/main/vnstock/commodity_prices.md
- vnstock VCI Quote Source: https://github.com/thinh-vu/vnstock/blob/main/vnstock/explorer/vci/quote.py
- vnstock MSN Quote Source: https://github.com/thinh-vu/vnstock/blob/main/vnstock/explorer/msn/quote.py
- vnstock Gold Price Source: https://github.com/thinh-vu/vnstock/blob/main/vnstock/explorer/misc/gold_price.py
- vnstock Exchange Rate Source: https://github.com/thinh-vu/vnstock/blob/main/vnstock/explorer/misc/exchange_rate.py
- PyPortfolioOpt Calculate Returns Guide: https://raw.githubusercontent.com/gahoccode/docs/refs/heads/main/optimize/pyportopt/returns/returns.md
- PyPortfolioOpt Mean-Variance Optimization Guide: https://raw.githubusercontent.com/gahoccode/docs/refs/heads/main/optimize/pyportopt/mvo/mvo.md
- PyPortfolioOpt Examples Guide: https://raw.githubusercontent.com/gahoccode/docs/refs/heads/main/optimize/pyportopt/examples/classic.md
- PyPortfolioOpt Post-Processing Guide: https://raw.githubusercontent.com/gahoccode/docs/refs/heads/main/optimize/pyportopt/post/post.md
- Model Context Protocol: https://modelcontextprotocol.io
- MCP Python SDK: https://github.com/modelcontextprotocol/python-sdk
- Docker MCP Gateway: https://github.com/docker/mcp-gateway

## Tutorials

- Docker MCP Tutorial by NetworkChuck: https://www.youtube.com/watch?v=GuTcle5edjk&t=1349s
- NetworkChuck's Docker MCP Example: https://github.com/theNetworkChuck/docker-mcp-tutorial
